{% extends "base.html" %}
{% block content %}
<section class="panel">
  <h2>Einstellungen</h2>
  <p>Die Zugangsdaten werden lokal in <code>settings.json</code> im Klartext gespeichert.</p>
  {% if message %}
    <p class="success">{{ message }}</p>
  {% endif %}
  {% if error %}
    <p class="error">{{ error }}</p>
  {% endif %}
  <form method="post" class="form-grid">
    <label>
      Umgebung
      <select name="base_url">
        <option value="https://ev.tanzsport-portal.de/api/v1" {% if settings.base_url == 'https://ev.tanzsport-portal.de/api/v1' %}selected{% endif %}>Produktiv</option>
        <option value="https://dtv-esv-qa.azurewebsites.net/api/v1" {% if settings.base_url == 'https://dtv-esv-qa.azurewebsites.net/api/v1' %}selected{% endif %}>QA</option>
      </select>
    </label>
    <label>
      Benutzername
      <input type="text" name="username" value="{{ settings.username }}" required>
    </label>
    <label>
      Passwort
      <input type="password" name="password" value="{{ settings.password }}" required>
    </label>
    <label>
      Accept-Header
      <input type="text" name="accept" value="{{ settings.accept }}" required>
    </label>
    <label>
      User-Agent (inkl. Software & Token)
      <input type="text" name="user_agent" value="{{ settings.user_agent }}" placeholder="TPS.net/1.0; Token=abc123" required>
    </label>
    <label>
      Standard-Filter Veranstalter/Ausrichter
      <input type="text" name="default_organizer_filter" value="{{ settings.default_organizer_filter }}" placeholder="z.B. Vereinsname">
    </label>
    <label>
      FTP-Host
      <input type="text" name="ftp_host" value="{{ settings.ftp_host }}" placeholder="ftp.example.com">
    </label>
    <label>
      FTP-Benutzer
      <input type="text" name="ftp_user" value="{{ settings.ftp_user }}" placeholder="user">
    </label>
    <label>
      FTP-Passwort
      <input type="password" name="ftp_password" value="{{ settings.ftp_password }}" placeholder="pass">
    </label>
    <label>
      FTP-Pfad (optional)
      <input type="text" name="ftp_path" value="{{ settings.ftp_path }}" placeholder="/www/zeitplan/">
    </label>
    <div class="form-actions">
      <button type="submit">Speichern</button>
    </div>
  </form>
</section>
{% endblock %}
